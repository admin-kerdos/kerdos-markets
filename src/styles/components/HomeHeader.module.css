@layer components {
  .header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
    padding-bottom: var(--space-4);
  }

  .brand {
    display: inline-flex;
    align-items: center;
    gap: clamp(var(--space-2), 1vw, var(--space-3));
    font-size: clamp(var(--font-size-lg), 2vw, var(--font-size-xl));
    font-weight: 700;
    letter-spacing: -0.01em;
    color: #d97706;
  }

  .logo {
    width: clamp(36px, 4vw, 56px);
    height: clamp(36px, 4vw, 56px);
    border-radius: var(--radius-md);
    object-fit: cover;
    filter: invert(47%) sepia(87%) saturate(629%) hue-rotate(357deg) brightness(95%) contrast(93%);
  }

  .title {
    margin: 0;
  }

  .actions {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3);
    margin-left: auto;
    --header-accent: #d97706;
    --header-accent-strong: #b45309;
    --header-accent-contrast: #ffffff;
    --color-brand: #d97706;
    --color-brand-strong: #b45309;
    --color-brand-contrast: #ffffff;
  }

  .authButtons {
    display: inline-flex;
    align-items: center;
    gap: clamp(0.4rem, 1vw, 0.6rem);
  }

  .authButton {
    min-height: 36px;
    border-radius: var(--radius-md);
    font-size: 0.9rem;
    font-weight: 600;
    padding: 6px 16px;
    transition:
      background var(--transition-base),
      color var(--transition-base),
      box-shadow var(--transition-base),
      transform var(--transition-short);
    cursor: pointer;
  }

  .authButton:focus-visible {
    box-shadow:
      0 0 0 2px var(--color-bg),
      0 0 0 4px var(--color-focus);
    outline: none;
  }

  .authButtonOutline {
    background: transparent;
    border: 1px solid var(--header-accent);
    color: var(--header-accent);
  }

  .authButtonOutline:hover {
    background: color-mix(in srgb, var(--header-accent) 12%, transparent);
  }

  .authButtonFilled {
    background: var(--header-accent);
    border: 1px solid transparent;
    color: var(--header-accent-contrast);
    transform: translateX(-0.1rem);
  }

  .authButtonFilled:hover {
    background: var(--header-accent-strong);
    box-shadow: var(--shadow-soft);
    transform: translateX(-0.1rem) translateY(-1px);
  }

  .authButtonFilled:active {
    transform: translateX(-0.1rem);
    background: var(--header-accent-strong);
  }

  .userMenu {
    position: relative;
    display: inline-flex;
    align-items: center;
  }

  .avatarButton {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 999px;
    border: 1px solid color-mix(in srgb, var(--color-border) 50%, transparent);
    background: color-mix(in srgb, var(--color-surface-elevated) 80%, transparent);
    padding: 0;
    cursor: pointer;
    transition:
      transform var(--transition-short),
      box-shadow var(--transition-base),
      border-color var(--transition-base);
  }

  .avatarButton:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-soft);
    border-color: color-mix(in srgb, var(--color-brand) 55%, transparent);
  }

  .avatarButton:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px var(--color-bg),
      0 0 0 4px var(--color-focus);
  }

  .avatarImage,
  .avatarInitial {
    width: 100%;
    height: 100%;
    border-radius: inherit;
    object-fit: cover;
    font-size: 0.85rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--color-brand-contrast);
    background: var(--color-brand);
  }

  .menu {
    position: absolute;
    top: calc(100% + 10px);
    right: 0;
    display: none;
    flex-direction: column;
    gap: 0;
    min-width: 180px;
    border-radius: 14px;
    background: var(--color-surface-elevated);
    border: 1px solid color-mix(in srgb, var(--color-border) 60%, transparent);
    box-shadow: 0 18px 40px rgba(5, 9, 26, 0.52);
    padding: 6px;
    z-index: 10;
  }

  .menuOpen {
    display: flex;
  }

  .menuItem {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0.55rem 0.75rem;
    border-radius: 10px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--color-text);
    background: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    transition:
      background var(--transition-base),
      color var(--transition-base);
  }

  .menuItem:hover {
    background: color-mix(in srgb, var(--color-brand) 18%, transparent);
    color: var(--color-brand-contrast);
  }

  .menuItem:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px var(--color-bg),
      0 0 0 4px var(--color-focus);
  }

  .menuSeparator {
    height: 1px;
    margin: 4px 0;
    background: color-mix(in srgb, var(--color-border) 60%, transparent);
  }

  @media (max-width: 767px) {
    .header {
      flex-wrap: nowrap;
      align-items: center;
      gap: var(--space-2);
      padding-bottom: var(--space-3);
    }

    .brand {
      font-size: 0.7rem;
      letter-spacing: -0.015em;
      gap: 0.35rem;
      flex: 0 1 auto;
      min-width: 0;
    }

    .logo {
      width: 28px;
      height: 28px;
      border-radius: 10px;
    }

    .actions {
      flex: 1 1 auto;
      display: inline-flex;
      align-items: center;
      justify-content: flex-end;
      gap: var(--space-2);
      width: auto;
    }

    .authButtons {
      flex-direction: row;
      gap: 0.4rem;
    }

    .authButton {
      min-height: 30px;
      padding: 4px 10px;
      font-size: 0.72rem;
      font-weight: 600;
      white-space: nowrap;
    }

    .authButtonFilled {
      transform: none;
    }

    .avatarButton {
      width: 32px;
      height: 32px;
    }

    .menu {
      min-width: 160px;
    }
  }
}
